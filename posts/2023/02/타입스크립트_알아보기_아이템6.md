---
title: "이펙티브 타입스크립트 1장 - 아이템 6"
tags:
  - effective_typescript
published: true
date: 2023-02-02 21:00:37
description: "2장 타입스크립트의 타입 시스템 - 아이템 6: 편집기를 사용하여 타입 시스템 탐색하기"
---

# 이펙티브 타입스크립트 2장 - 아이템 6

---

## 편집기를 사용하여 타입 시스템 탐색하기

TS를 설치하면 다음 두가지를 실행할 수 있다.

- TS 컴파일러(tsc)
- 단독으로 실행할 수 있는 TS 서버(tsserver)

그 중 `tsserver`는 "언어 서비스"를 제공한다. 언어 서비스는 코드의 자동 완성, 명세(사양, specification) 검사, 검색, 리팩토링이 포함된다.<br/>
보통은 편집기를 통해서 언어 서비스를 사용하는데, `tsserver`에서 언어 서비스를 제공하도록 설정하는게 좋다. 다음은 편집기(vscode)에서 제공하는 언어서비스이다.

### 1. 변수 타입 추론

편집기마다 조금 다르지만 보통의 경우 다음과 같이 심벌 위에 마우스 커서를 대면 TS가 그 타입을 어떻게 판단하고 있는지 확인할 수 있다.

![item6-01.png](item6-01.png)

`num` 변수의 타입을 `number`라고 직접 지정하지는 않았지만, TS는 `10`이라는 값을 보고 그 타입을 알아낸다.

### 2. 함수의 반환값 추론

변수뿐만 아니라 다음과 같이 함수의 타입도 추론할 수 있다.

![item6-02.png](item6-02.png)

다음과 같이 추론된 함수의 반환 타입이 `number`로 추론하고 있다. 만약 이 타입이 기대한 것과 다르면 타입 선언을 직접 명시하고, 실제 문제가 발생하는 부분을 찾아봐야한다.

### 3. 분기에서 타입 추론

특정 시점에 TS가 값의 타입을 어떻게 이해하고 있는지 살펴보는것은 타입 넓히기와 좁히기의 개념을 잡기 위해 꼭 필요하다.

![item6-03.png](item6-03.png)

다음과 같이 조건문의 분기에서 값의 타입이 어떻게 변하는지를 살펴보는 것은 타입 시스템을 익히는 매우 좋은 방법이다.

### 4. 객체 내에서 타입 추론

객체에서는 개별 속성을 살펴봄으로써 TS가 어떻게 각각의 속성을 추론하는지 알 수 있다.

![item6-04.png](item6-04.png)

만약 `x`가 튜플 타입(`[number, number, number]`)이여야 한다면, 타입 구문을 명시해아 한다.

### 5. 메서드 체인에서의 타입 추론

연산자 체인 중간에 추론된 제네릭 타입을 알고 싶으면 메서드의 이름을 조사하면 된다.

![item6-05.png](item6-05.png)

다음은 `Array<string>`은 `split` 결과의 타입이 `string`이라고 추론되었음을 알 수 있다. 이 예제는 간단하기 때문에 추론 정보가 없어도 되지만, 실제 코드에서 함수 호출이 길게 이어진다면 추론 정보는 디버깅하는데 꼭 필요하다.

### 6. 편집기 오류를 통한 타입 추론

편집기상의 오류를 살펴보는 것도 타입 시스템의 성향을 파악하는데 좋은 방법이다. 다음의 예시는 `id`에 해당하거나 기본값인 `HTMLElement`를 반환하는 함수이다. TS는 두 곳에서 오류를 발생시킨다.

```ts
function getElement(elOrId: string | HTMLElement | null): HTMLElement {
	if (typeof elOrId === "object") {
		// Error: Type "HTMLElement | null" is not assignable to type "HTMLElement".
		return elOrId;
	} else if (elOrId === null) {
		return document.body;
	} else {
		const el = document.getElementByID(elOrId);
		// Error: Type "HTMLElement | null" is not assignable to type "HTMLElement".
		return el;
	}
}
```

함수 내의 분기는 `HTMLElement` 타입을 처리하는 의도였지만 `typeof null`은 `"object"`이므로 두 군데에서 오류를 발생시킨다.

### 7. Go to Definition을 통한 타입 추론

언어 서비스는 라이브러리와 라이브러리의 타입 선언을 탐색할 때 도움된다. 코드 내에서 `fetch` 함수가 호출되고, 이 함수를 더 알아보길 원한다고 가정해보자. 편집기는 다음과 같이 "Go to Definition" 옵션을 제공한다.

![item6-07.png](item6-07.png)

이 옵션을 선택하면 TS에 포함되어 있는 DOM 타입 선언인 `lib.dom.d.ts`로 이동한다.<br />
해당 파일에서 더 많은 타입을 탐색하다보면 처음에는 이해하기 어렵지만 TS가 무엇을 하는지, 어떻게 라이브러리가 모델링 되었는지, 어떻게 오류를 찾아낼지 살펴볼 수 잇는 훌륭한 수단이라는 것을 알 수 있다.
